!function(e){function t(t){for(var a,c,l=t[0],i=t[1],d=t[2],s=0,p=[];s<l.length;s++)c=l[s],Object.prototype.hasOwnProperty.call(o,c)&&o[c]&&p.push(o[c][0]),o[c]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a]);for(u&&u(t);p.length;)p.shift()();return r.push.apply(r,d||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],a=!0,l=1;l<n.length;l++){var i=n[l];0!==o[i]&&(a=!1)}a&&(r.splice(t--,1),e=c(c.s=n[0]))}return e}var a={},o={0:0},r=[];function c(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=a,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)c.d(n,a,function(t){return e[t]}.bind(null,a));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="";var l=window.webpackJsonp=window.webpackJsonp||[],i=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var u=i;r.push([8,1]),n()}({14:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.LeafletInfoMap=void 0;var o=a(n(2)),r=a(n(15));n(16),n(18),n(19);var c=r.default.tileLayer,l=r.default.map,i=r.default.MarkerClusterGroup,d=r.default.marker,u=r.default.DivIcon,s="1292036998:AAFkWJVt6GuU3-pyreWE-Xa8LMp4y9d0WgE",p=n(21)("1SQITOMPJN","2f1a6c924bc9f33235bb98e570053a79"),f=l(document.getElementById("map"),{zoomControl:!1});t.LeafletInfoMap=function(){var e=o.default.useState([]),t=e[0],n=e[1],a=o.default.useState([]),l=a[0],m=a[1],v=o.default.useState({}),h=v[0],g=v[1],b=o.default.useState(),y=b[0],E=b[1],_=o.default.useState(),k=_[0],C=_[1],x=o.default.useState(),L=x[0],w=x[1],T=o.default.useState(),O=T[0],z=T[1],M=o.default.useState(new i({spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,animate:!0,maxClusterRadius:20,removeOutsideVisibleBounds:!0}))[0],A=o.default.useState(new i({spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,animate:!0,maxClusterRadius:20,removeOutsideVisibleBounds:!0}))[0];return o.default.useEffect((function(){document.querySelector(".leaflet-bottom.leaflet-right").innerHTML="",f.setView([54.339248,29.39981],8),f.on("moveend",(function(){return z(f.getBounds())}));var e=r.default.layerGroup();c("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:10}).addTo(e),c("https://raw.githubusercontent.com/shappoff/storage/rkka_v4_and_2v_jan20/tiles/Z{z}/{y}/{x}.jpg",{minZoom:11,maxZoom:14}).addTo(e);var t=c("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:14}),n=c("https://raw.githubusercontent.com/shappoff/storage/rkka_v4_and_2v_jan20/tiles/Z{z}/{y}/{x}.jpg",{maxZoom:14}),a=(r.default.tileLayer("http://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}",{maxZoom:20,subdomains:["mt0","mt1","mt2","mt3"]}),r.default.tileLayer("http://{s}.google.com/vt/lyrs=s,h&x={x}&y={y}&z={z}",{maxZoom:20,subdomains:["mt0","mt1","mt2","mt3"]}));t.addTo(f);var o={"Современная карта":t,"РККА,верстовка...":e,"Старая карта":n,"Гугл Спутник":a},l={"Церкви":M,"Костёлы":A};r.default.control.layers(o,l,{position:"topleft",collapsed:!1}).addTo(f),r.default.control.zoom({position:"bottomleft"}).addTo(f),p.initIndex("prikhody").search("",{filters:"_tags:no_geoloc"}).then((function(e){var t=e.hits;m(t)}))}),[]),o.default.useEffect((function(){var e=p.initIndex("prikhody"),t="",a=f.getZoom();a<9||(t="".concat(O.getNorth(),", ").concat(O.getEast(),", ").concat(O.getSouth(),", ").concat(O.getWest())),e.search("",{facets:["*"],filters:"_tags:geoloc",facetFilters:[[a<9?"placeType:город":""],[L?"placeGub:".concat(L):""],[y?"placeUezd:".concat(y):""],[k?"placeVolost:".concat(k):""]],insideBoundingBox:t}).then((function(e){var t=e.hits,a=e.facets;n(t),g(a)}))}),[y,L,k,O]),o.default.useEffect((function(){if(t&&(!t||t.length))return t.forEach((function(e){var t=e.title,n=e._geoloc,a=e.placeGub,o=e.placeUezd,c=e.placeVolost,l=e.placeNp,i=e.placeType,p=(e.archives,e.familysearch,!!~t.indexOf("костёл")),m=t.split("-")[1];if(n&&n.lat){var v=n.lat,h=n.lng,g="".concat(i," ").concat(l).concat(c?", ".concat(c," волость"):"").concat(o?", ".concat(o," уезд"):"").concat(a?", ".concat(a," губерния"):""),b=d([v,h],{title:g,icon:new u({html:p?"♱":"☦",className:"marker-church-div-icon ".concat(p?"kostel":"church")})}),y=document.createElement("div"),E=document.createElement("b");E.innerHTML="<div>".concat(m,"</div>"),y.appendChild(E);var _=document.createElement("div");_.innerHTML=g.replace(/,/g,"<br>"),y.appendChild(_);var k=document.createElement("div");k.innerText="сменить координаты",k.setAttribute("title","Сменить или уточнить геолокацию"),k.classList.add("indicate-button"),k.addEventListener("click",(function(){var e=document.getElementById("map");r.default.DomUtil.addClass(e,"crosshair-cursor-enabled");var n=function(l){var i=l.latlng,d=i.lat,u=i.lng,p="change: ".concat(a,";").concat(o,";").concat(c,";\n`").concat(t,"`;\n`").concat(d,", ").concat(u,"`\n[ordaOfBy](https://orda.of.by/.map/?").concat(d,",").concat(u,"&m=1v/14,wig/13,wig_v2/14,wig250/14,rkka/14,rkka_v2/14,rkka250/14,rkka2km/12,3v/13,3v_tmp56/13,3v_tmp71/13,kdwr/13,nem25/14,2v/13,polv/13,austr/13)");fetch("https://api.telegram.org/bot".concat(s,"/sendMessage?chat_id=").concat("162676802","&parse_mode=").concat("Markdown","&disable_web_page_preview=").concat(!0,"&text=").concat(encodeURIComponent(p))).then((function(){r.default.DomUtil.removeClass(e,"crosshair-cursor-enabled"),f.off("click",n),alert("Координаты отправлены!")}))};setTimeout((function(){f.on("click",n),b.closePopup()}))})),y.appendChild(k),b.bindPopup(y),p?A.addLayer(b):M.addLayer(b)}})),f.addLayer(M),f.addLayer(A),(y||L||k)&&f.fitBounds(M.getBounds()),function(){M.clearLayers(),A.clearLayers()}}),[t]),o.default.useEffect((function(){var e=r.default.control({position:"topleft"});return h&&h.placeGub&&(e.onAdd=function(e){var t=r.default.DomUtil.create("div","info guberniya"),n=document.createElement("select");n.addEventListener("change",(function(e){w(~e.target.value.indexOf("губерния")?"":e.target.value)}));var a=document.createElement("option");for(var o in a.innerText="губерния",a.setAttribute("value",""),n.appendChild(a),h.placeGub){var c=document.createElement("option");c.innerText=o,c.setAttribute("value",o),o!==L&&1!==Object.keys(h.placeGub).length||c.setAttribute("selected","true"),n.appendChild(c)}return t.appendChild(n),t},e.addTo(f)),function(){f.removeControl(e)}}),[h.placeGub]),o.default.useEffect((function(){var e=r.default.control({position:"topleft"});return h&&h.placeUezd&&(e.onAdd=function(e){var t=r.default.DomUtil.create("div","info uezd"),n=document.createElement("select");n.addEventListener("change",(function(e){E(~e.target.value.indexOf("уезд")?"":e.target.value)}));var a=document.createElement("option");for(var o in a.innerText="уезд",a.setAttribute("value",""),n.appendChild(a),h.placeUezd){var c=document.createElement("option");c.innerText=o,c.setAttribute("value",o),o!==y&&1!==Object.keys(h.placeUezd).length||c.setAttribute("selected","true"),n.appendChild(c)}return t.appendChild(n),t},e.addTo(f)),function(){f.removeControl(e)}}),[h.placeUezd]),o.default.useEffect((function(){var e=r.default.control({position:"topleft"});return h&&h.placeVolost&&(e.onAdd=function(e){var t=r.default.DomUtil.create("div","info volost"),n=document.createElement("select");n.addEventListener("change",(function(e){C(~e.target.value.indexOf("волость")?"":e.target.value)}));var a=document.createElement("option");for(var o in a.innerText="волость",a.setAttribute("value",""),n.appendChild(a),h.placeVolost){var c=document.createElement("option");c.innerText=o,c.setAttribute("value",o),o!==k&&1!==Object.keys(h.placeVolost).length||c.setAttribute("selected","true"),n.appendChild(c)}return t.appendChild(n),t},e.addTo(f)),function(){f.removeControl(e)}}),[h.placeVolost]),o.default.useEffect((function(){var e={};l.sort((function(e,t){return e.title<t.title?-1:1})).forEach((function(t){var n;e[t.placeUezd]?!e[t.placeUezd]||e[t.placeUezd][t.placeVolost]?e[t.placeUezd]&&e[t.placeUezd][t.placeVolost]&&e[t.placeUezd][t.placeVolost].push(t.title):e[t.placeUezd][t.placeVolost]=[t.title]:e[t.placeUezd]=((n={})[t.placeVolost]=[t.title],n)}));var t=r.default.control();return t.onAdd=function(e){return this._div=r.default.DomUtil.create("div","info-not-found-villages"),this.update(),this._div},t.update=function(t){var n=document.createElement("details");n.addEventListener("click",(function(e){var t=e.target;t.classList.contains("selsovet")&&[].forEach.call(n.querySelectorAll(".okrug-list > li"),(function(e){console.log("target",e.contains(t)),e.contains(t)||[].forEach.call(e.querySelectorAll("[open]"),(function(e){return e.removeAttribute("open")}))}))}));var a=document.createElement("summary");a.classList.add("root"),a.innerHTML="Список не найденных на карте н.п.",k&&n.setAttribute("open",null),n.appendChild(a);var o=document.createElement("ul");o.classList.add("okrug-list");var c=function(t){var n=document.createElement("li"),a=document.createElement("details"),c=document.createElement("summary");a.classList.add("uezd"),c.classList.add("uezd"),t===y&&a.setAttribute("open",null),c.innerHTML="".concat(t," уезд"),a.appendChild(c);var l=document.createElement("ul");l.setAttribute("style","max-height: 300px;overflow-y: scroll;");var i=function(n){var a=document.createElement("li"),o=document.createElement("details"),c=document.createElement("summary");o.classList.add("volost"),c.classList.add("volost"),n===L&&o.setAttribute("open",null),c.setAttribute("value",n),c.innerHTML="".concat(n," волость"),o.appendChild(c),n===k&&o.setAttribute("open",null);var i=document.createElement("ul"),d=function(a){var o=document.createElement("li"),c=document.createElement("span"),l=e[t][n][a];c.innerHTML="".concat(l);var d=document.createElement("span");d.innerHTML="указать",d.classList.add("indicate-button"),d.setAttribute("title","Указать геолокацию этого н.п."),d.addEventListener("click",(function(){var e=document.getElementById("map");r.default.DomUtil.addClass(e,"crosshair-cursor-enabled");var a=function(c){var i=c.latlng,d=i.lat,u=i.lng,p="new: ".concat(t,";").concat(n,";\n`").concat(l,"`;\n`").concat(d,", ").concat(u,"`\n[ordaOfBy](https://orda.of.by/.map/?").concat(d,",").concat(u,"&m=1v/14,wig/13,wig_v2/14,wig250/14,rkka/14,rkka_v2/14,rkka250/14,rkka2km/12,3v/13,3v_tmp56/13,3v_tmp71/13,kdwr/13,nem25/14,2v/13,polv/13,austr/13)");fetch("https://api.telegram.org/bot".concat(s,"/sendMessage?chat_id=").concat("162676802","&parse_mode=").concat("Markdown","&disable_web_page_preview=").concat(!0,"&text=").concat(encodeURIComponent(p))).then((function(){r.default.DomUtil.removeClass(e,"crosshair-cursor-enabled"),f.off("click",a),o.remove(),alert("Координаты отправлены!")}))};setTimeout((function(){f.on("click",a)}))})),o.appendChild(c),o.appendChild(d),i.appendChild(o)};for(var u in e[t][n])d(u);o.appendChild(i),a.appendChild(o),l.appendChild(a)};for(var d in e[t])i(d);a.appendChild(l),n.appendChild(a),o.appendChild(n)};for(var l in e)c(l);n.appendChild(o),this._div.appendChild(n)},t.addTo(f),function(){f.removeControl(t)}}),[l,k]),null}},8:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=a(n(9)),r=a(n(2)),c=n(14),l=document.getElementById("root");o.default.render(r.default.createElement(c.LeafletInfoMap,null),l)}});